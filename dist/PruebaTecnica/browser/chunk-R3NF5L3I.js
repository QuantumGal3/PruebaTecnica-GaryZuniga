import{a as k}from"./chunk-SEQ5P6DM.js";import{Aa as y,D as u,E as p,M as a,P as c,Q as v,Sa as E,Ta as A,Va as w,aa as b,ba as g,ca as f,da as n,ea as i,fa as x,ia as S,ja as R,ka as d,ra as _,sa as o,ta as h,ua as m,ya as C}from"./chunk-K7WYNZWF.js";var T=r=>["/rooms",r],I=(r,e)=>e.id;function $(r,e){if(r&1){let t=S();n(0,"div",5)(1,"div",6)(2,"div",7)(3,"h5",8),o(4),i()(),n(5,"div",9)(6,"p",10)(7,"strong"),o(8,"Capacidad:"),i(),o(9),i(),n(10,"p",10)(11,"strong"),o(12,"Pel\xEDculas asignadas:"),i(),o(13),i(),n(14,"span"),o(15),i()(),n(16,"div",11)(17,"button",12),o(18," Editar "),i(),n(19,"button",13),R("click",function(){let s=u(t).$implicit,M=d();return p(M.navigateToAssignMovies(s.id))}),o(20," Asignar Pel\xEDculas "),i()()()()}if(r&2){let t=e.$implicit,l=e.$index,s=d();a(4),h(t.name),a(5),m(" ",t.capacity," personas "),a(4),m(" ",t.movies.length," "),a(),_(C("badge ",s.getStatusClass(s.roomAvailabilities[l].status))),a(),m(" ",s.getStatusText(s.roomAvailabilities[l].status)," "),a(2),f("routerLink",y(8,T,t.id))}}var L=class r{constructor(e,t){this.roomsService=e;this.router=t;this.loadRooms()}rooms=[];roomAvailabilities=[];loadRooms(){this.rooms=this.roomsService.getAllRooms(),this.roomAvailabilities=this.rooms.map(e=>this.roomsService.getRoomAvailability(e.id))}getStatusClass(e){switch(e){case"available":return"bg-success";case"almost-full":return"bg-warning text-dark";case"full":return"bg-danger";default:return"bg-secondary"}}getStatusText(e){switch(e){case"available":return"Sala disponible";case"almost-full":return`Sala con ${this.roomAvailabilities.find(t=>t.status===e)?.assignedMovies} pel\xEDculas`;case"full":return"Sala no disponible";default:return"Estado desconocido"}}navigateToAssignMovies(e){this.router.navigate(["/rooms",e,"assign"])}static \u0275fac=function(t){return new(t||r)(c(k),c(E))};static \u0275cmp=v({type:r,selectors:[["app-room-list"]],decls:10,vars:0,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["routerLink","/rooms/new",1,"btn","btn-primary"],[1,"bi","bi-plus-circle"],[1,"row"],[1,"col-md-4","mb-4"],[1,"card","h-100"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"card-text"],[1,"card-footer","bg-white"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"routerLink"],[1,"btn","btn-sm","btn-outline-success",3,"click"]],template:function(t,l){t&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Gesti\xF3n de Salas de Cine"),i(),n(4,"a",2),x(5,"i",3),o(6," Agregar Sala "),i()(),n(7,"div",4),b(8,$,21,10,"div",5,I),i()()),t&2&&(a(8),g(l.rooms))},dependencies:[w,A],styles:["[_nghost-%COMP%]{display:block}"]})};export{L as RoomListComponent};
