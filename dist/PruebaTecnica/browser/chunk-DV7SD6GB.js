import{a as R,b as W,e as z,h as A}from"./chunk-CLRGF3AU.js";import{a as q}from"./chunk-GSOMRDBQ.js";import{$ as v,Aa as I,Ba as g,Ca as C,D as _,Da as D,E as f,Ka as O,L as b,La as V,M as r,Ma as j,Na as B,P as M,Q as y,Sa as F,Ta as Q,Va as N,_ as p,aa as P,ba as S,ca as u,da as n,ea as o,fa as E,ia as k,ja as c,ka as m,sa as a,ta as x,ua as d,va as w,wa as L,xa as T}from"./chunk-K7WYNZWF.js";var Y=i=>["/movies",i],G=(i,t)=>t.id;function H(i,t){i&1&&(n(0,"div",6)(1,"div",12)(2,"span",13),a(3,"Cargando..."),o()()())}function J(i,t){if(i&1&&(n(0,"div",7),a(1),o()),i&2){let e=m();r(),d(" ",e.error," ")}}function K(i,t){if(i&1&&(n(0,"div",9)(1,"div",14),E(2,"img",15),n(3,"div",16)(4,"h5",17),a(5),o(),n(6,"p",18),a(7),g(8,"date"),n(9,"span",19),a(10),g(11,"number"),o()(),n(12,"p",20),a(13),g(14,"slice"),o()(),n(15,"div",21)(16,"a",22),a(17," Ver detalles "),o()()()()),i&2){let e=t.$implicit;r(2),u("src",e.poster_path?"https://image.tmdb.org/t/p/w500"+e.poster_path:"assets/no-image.jpg",b)("alt",e.title),r(3),x(e.title),r(2),d(" ",C(8,7,e.release_date,"mediumDate")," "),r(3),d(" \u2605 ",C(11,10,e.vote_average,"1.1-1")," "),r(3),d(" ",e.overview?e.overview.length>100?D(14,13,e.overview,0,100)+"...":e.overview:"Descripci\xF3n no disponible"," "),r(3),u("routerLink",I(17,Y,e.id))}}function X(i,t){i&1&&(n(0,"div",10)(1,"h4"),a(2,"No se encontraron pel\xEDculas"),o()())}function Z(i,t){if(i&1){let e=k();n(0,"nav",11)(1,"ul",23)(2,"li",24)(3,"button",25),c("click",function(){_(e);let l=m();return f(l.changePage(l.currentPage-1))}),a(4," Anterior "),o()(),n(5,"li",24)(6,"span",26),a(7),o()(),n(8,"li",24)(9,"button",27),c("click",function(){_(e);let l=m();return f(l.changePage(l.currentPage+1))}),a(10," Siguiente "),o()()()()}if(i&2){let e=m();r(3),u("disabled",e.currentPage===1),r(4),x(e.currentPage)}}var U=class i{constructor(t,e){this.moviesService=t;this.router=e}movies=[];filteredMovies=[];loading=!0;error=null;searchQuery="";currentPage=1;ngOnInit(){this.loadPopularMovies()}loadPopularMovies(){this.loading=!0,this.error=null,this.moviesService.getPopularMovies(this.currentPage).subscribe({next:t=>{this.movies=t.results,this.filteredMovies=[...this.movies],this.loading=!1},error:t=>{this.handleError("Error al cargar pel\xEDculas")}})}searchMovies(){if(!this.searchQuery.trim()){this.filteredMovies=[...this.movies];return}this.loading=!0,this.moviesService.searchMovies(this.searchQuery).subscribe({next:t=>{this.filteredMovies=t.results,this.loading=!1},error:t=>{this.handleError("Error en la b\xFAsqueda")}})}changePage(t){this.currentPage=t,this.loadPopularMovies()}handleError(t){this.error=t,this.loading=!1,setTimeout(()=>this.error=null,3e3)}goToDetails(t){this.router.navigate(["/movies",t])}static \u0275fac=function(e){return new(e||i)(M(q),M(F))};static \u0275cmp=y({type:i,selectors:[["app-movie-list"]],decls:14,vars:5,consts:[[1,"container","mt-4"],[1,"row","mb-4"],[1,"col-md-8","mx-auto"],[1,"input-group"],["type","text","placeholder","Buscar pel\xEDculas...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn-primary",3,"click"],[1,"text-center","my-5"],[1,"alert","alert-danger","text-center"],[1,"row"],[1,"col-md-4","mb-4"],[1,"col-12","text-center","my-5"],[1,"mt-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"card","h-100"],[1,"card-img-top",2,"height","400px","object-fit","cover",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"text-muted"],[1,"badge","bg-primary","ms-2"],[1,"card-text"],[1,"card-footer"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"pagination","justify-content-center"],[1,"page-item"],[1,"page-link",3,"click","disabled"],[1,"page-link"],[1,"page-link",3,"click"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),T("ngModelChange",function(h){return L(s.searchQuery,h)||(s.searchQuery=h),h}),c("keyup.enter",function(){return s.searchMovies()}),o(),n(5,"button",5),c("click",function(){return s.searchMovies()}),a(6," Buscar "),o()()()(),p(7,H,4,0,"div",6),p(8,J,2,1,"div",7),n(9,"div",8),P(10,K,18,19,"div",9,G,!1,X,3,0,"div",10),o(),p(13,Z,11,2,"nav",11),o()),e&2&&(r(4),w("ngModel",s.searchQuery),r(3),v(s.loading?7:-1),r(),v(s.error?8:-1),r(2),S(s.filteredMovies),r(3),v(s.filteredMovies.length>0?13:-1))},dependencies:[B,A,R,W,z,N,Q,j,V,O],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s ease;height:100%}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a}.card-img-top[_ngcontent-%COMP%]{height:400px;object-fit:cover;background-color:#f8f9fa}.pagination[_ngcontent-%COMP%]{margin-top:20px}.btn-primary[_ngcontent-%COMP%]{margin-right:5px}.badge[_ngcontent-%COMP%]{font-size:.9em}"]})};export{U as MovieListComponent};
